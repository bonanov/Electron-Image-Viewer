!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e){t.exports=sharp},function(t,e){t.exports=gm},function(t,e){t.exports=stackblur},function(t,e,r){"use strict";r.r(e);var n=r(0),o=r.n(n),a=(r(2),r(1)),i=r.n(a);
/*! Fast Average Color | Â© 2019 Denis Seleznev | MIT License | https://github.com/hcodes/fast-average-color/ */
function s(t,e,r){const n={};for(let o=0;o<e;o+=r){let e=t[o],r=t[o+1],a=t[o+2],i=t[o+3],s=Math.round(e/24)+","+Math.round(r/24)+","+Math.round(a/24);n[s]?n[s]=[n[s][0]+e*i,n[s][1]+r*i,n[s][2]+a*i,n[s][3]+i,n[s][4]+1]:n[s]=[e*i,r*i,a*i,i,1]}const o=Object.keys(n).map(function(t){return n[t]}).sort(function(t,e){const r=t[4],n=e[4];return r>n?-1:r===n?0:1}),[a,i,s,h,c]=o[0];return h?[Math.round(a/h),Math.round(i/h),Math.round(s/h),Math.round(h/c)]:[0,0,0,0]}function h(t,e,r){let n=0,o=0,a=0,i=0,s=0;for(let h=0;h<e;h+=r){const e=t[h+3];n+=t[h]*e,o+=t[h+1]*e,a+=t[h+2]*e,i+=e,s++}return i?[Math.round(n/i),Math.round(o/i),Math.round(a/i),Math.round(i/s)]:[0,0,0,0]}function c(t,e,r){let n=0,o=0,a=0,i=0,s=0;for(let h=0;h<e;h+=r){const e=t[h],r=t[h+1],c=t[h+2],l=t[h+3];n+=e*e*l,o+=r*r*l,a+=c*c*l,i+=l,s++}return i?[Math.round(Math.sqrt(n/i)),Math.round(Math.sqrt(o/i)),Math.round(Math.sqrt(a/i)),Math.round(i/s)]:[0,0,0,0]}const l="FastAverageColor: ";const u=new class{getColorAsync(t,e){if(t.complete){const r=this.getColor(t,e);return r.error?Promise.reject(r.error):Promise.resolve(r)}return this._bindImageEvents(t,e)}getColor(t,e){e=e||{};const r=this._getDefaultColor(e),n=this._getOriginalSize(t),o=this._prepareSizeAndPosition(n,e);let a=r;if(!(o.srcWidth&&o.srcHeight&&o.destWidth&&o.destHeight))return this._outputError(e,`incorrect sizes for resource "${t.src}".`),this._prepareResult(r);if(!this._ctx&&(this._canvas=this._makeCanvas(),this._ctx=this._canvas.getContext&&this._canvas.getContext("2d"),!this._ctx))return this._outputError(e,"Canvas Context 2D is not supported in this browser."),this._prepareResult(r);this._canvas.width=o.destWidth,this._canvas.height=o.destHeight;try{this._ctx.clearRect(0,0,o.destWidth,o.destHeight),this._ctx.drawImage(t,o.srcLeft,o.srcTop,o.srcWidth,o.srcHeight,0,0,o.destWidth,o.destHeight);const r=this._ctx.getImageData(0,0,o.destWidth,o.destHeight).data;a=this.getColorFromArray4(r,e)}catch(r){this._outputError(e,`security error (CORS) for resource ${t.src}.\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image`,r)}return this._prepareResult(a)}getColorFromArray4(t,e){e=e||{};const r=t.length;if(r<4)return this._getDefaultColor(e);const n=r-r%4,o=4*(e.step||1);let a;switch(e.algorithm||"sqrt"){case"simple":a=h;break;case"sqrt":a=c;break;case"dominant":a=s;break;default:throw new Error(`${l}${e.algorithm} is unknown algorithm.`)}return a(t,n,o)}destroy(){delete this._canvas,delete this._ctx}_getDefaultColor(t){return this._getOption(t,"defaultColor",[255,255,255,255])}_getOption(t,e,r){return void 0===t[e]?r:t[e]}_prepareSizeAndPosition(t,e){let r,n=this._getOption(e,"left",0),o=this._getOption(e,"top",0),a=this._getOption(e,"width",t.width),i=this._getOption(e,"height",t.height),s=a,h=i;return"precision"===e.mode?{srcLeft:n,srcTop:o,srcWidth:a,srcHeight:i,destWidth:s,destHeight:h}:(a>i?(r=a/i,s=100,h=Math.round(s/r)):(r=i/a,h=100,s=Math.round(h/r)),(s>a||h>i||s<10||h<10)&&(s=a,h=i),{srcLeft:n,srcTop:o,srcWidth:a,srcHeight:i,destWidth:s,destHeight:h})}_bindImageEvents(t,e){return new Promise((r,n)=>{const o=()=>{s();const o=this.getColor(t,e);o.error?n(o.error):r(o)},a=()=>{s(),n(new Error(`${l}Error loading image ${t.src}.`))},i=()=>{s(),n(new Error(`${l}Image "${t.src}" loading aborted.`))},s=()=>{t.removeEventListener("load",o),t.removeEventListener("error",a),t.removeEventListener("abort",i)};t.addEventListener("load",o),t.addEventListener("error",a),t.addEventListener("abort",i)})}_prepareResult(t){const e=t.slice(0,3),r=[].concat(e,t[3]/255),n=this._isDark(t);return{value:t,rgb:"rgb("+e.join(",")+")",rgba:"rgba("+r.join(",")+")",hex:this._arrayToHex(e),hexa:this._arrayToHex(t),isDark:n,isLight:!n}}_getOriginalSize(t){return t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:{width:t.width,height:t.height}}_toHex(t){let e=t.toString(16);return 1===e.length?"0"+e:e}_arrayToHex(t){return"#"+t.map(this._toHex).join("")}_isDark(t){return(299*t[0]+587*t[1]+114*t[2])/1e3<128}_makeCanvas(){return"undefined"==typeof window?new OffscreenCanvas(1,1):document.createElement("canvas")}_outputError(t,e,r){t.silent||(console.error(`${l}${e}`),r&&console.error(r))}},d=async t=>{return{...await new Promise((e,r)=>{i()(t).size(async(t,r)=>{if(t)return e({err:t});e({width:r.width,height:r.height})})})}},{ipcRenderer:g}=window.electron;g.on("asynchronous-message",async(t,e)=>{const{data:r,type:n}=e;switch(n){case"GET_PROPS":{const t={...await(async t=>{const e=await d(t),{width:r,height:n,err:o}=e;return{width:r,height:n,aspect:r/n,err:o,fullPath:t}})(r.fullPath),path:r.fullPath};g.send("asynchronous-message",(({width:t,height:e,aspect:r,fullPath:n})=>({type:"SEND_PROPS",data:{fullPath:n,width:t,height:e,aspect:r}}))(t));break}case"GET_RESIZED":{const{width:t,height:e,fullPath:n}=r,a={fullPath:n,base64:await(async({fullPath:t,width:e,height:r})=>{return await new Promise((n,a)=>{o()(t).resize(e,r,{fit:o.a.fit.inside,kernel:o.a.kernel.lanczos3,withoutEnlargement:!0}).png({compressionLevel:0}).toBuffer().then(t=>n("data:image/png;base64,"+t.toString("base64"))).catch(t=>a(t))})})({width:t,height:e,fullPath:n})};g.send("asynchronous-message",(({fullPath:t,base64:e})=>({type:"SEND_RESIZED",data:{fullPath:t,base64:e}}))(a));break}case"GET_BLURED":{const{width:t,height:e,fullPath:n}=r,a={fullPath:n,base64:await(async({fullPath:t,width:e,height:r})=>{return await new Promise((n,a)=>{o()(t).resize(e,r,{fit:o.a.fit.fill,kernel:o.a.kernel.cubic,withoutEnlargement:!0}).blur(15).png({compressionLevel:0}).toBuffer().then(t=>n("data:image/png;base64,"+t.toString("base64"))).catch(t=>a(t))})})({width:t,height:e,fullPath:n})};g.send("asynchronous-message",(({fullPath:t,base64:e})=>({type:"SEND_BLURED",data:{fullPath:t,base64:e}}))(a));break}case"GET_COLOR":{console.log(r);const{buffer:t,fullPath:e}=r,n={fullPath:e,color:await(async t=>{u.getColorFromArray4(t)})(t)};g.send("asynchronous-message",(({fullPath:t,color:e})=>({type:"SEND_COLOR",data:{fullPath:t,color:e}}))(n));break}}})}]);