!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e){t.exports=sharp},function(t,e){t.exports=fs},function(t,e){t.exports=gm},function(t,e){var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}t.exports=function(t,e,i,o){if(!(isNaN(o)||o<1)){var s,h,c,l,u,d,g,f,p,m,w,_,b,y,v,E,P,x,M,L,S,O,C,H,k=(o|=0)+o+1,D=e-1,R=i-1,T=o+1,j=T*(T+1)/2,W=new a,I=W;for(c=1;c<k;c++)if(I=I.next=new a,c==T)var $=I;I.next=W;var z=null,F=null;g=d=0;var N=r[o],A=n[o];for(h=0;h<i;h++){for(E=P=x=M=f=p=m=w=0,_=T*(L=t[d]),b=T*(S=t[d+1]),y=T*(O=t[d+2]),v=T*(C=t[d+3]),f+=j*L,p+=j*S,m+=j*O,w+=j*C,I=W,c=0;c<T;c++)I.r=L,I.g=S,I.b=O,I.a=C,I=I.next;for(c=1;c<T;c++)l=d+((D<c?D:c)<<2),f+=(I.r=L=t[l])*(H=T-c),p+=(I.g=S=t[l+1])*H,m+=(I.b=O=t[l+2])*H,w+=(I.a=C=t[l+3])*H,E+=L,P+=S,x+=O,M+=C,I=I.next;for(z=W,F=$,s=0;s<e;s++)t[d+3]=C=w*N>>A,0!=C?(C=255/C,t[d]=(f*N>>A)*C,t[d+1]=(p*N>>A)*C,t[d+2]=(m*N>>A)*C):t[d]=t[d+1]=t[d+2]=0,f-=_,p-=b,m-=y,w-=v,_-=z.r,b-=z.g,y-=z.b,v-=z.a,l=g+((l=s+o+1)<D?l:D)<<2,f+=E+=z.r=t[l],p+=P+=z.g=t[l+1],m+=x+=z.b=t[l+2],w+=M+=z.a=t[l+3],z=z.next,_+=L=F.r,b+=S=F.g,y+=O=F.b,v+=C=F.a,E-=L,P-=S,x-=O,M-=C,F=F.next,d+=4;g+=e}for(s=0;s<e;s++){for(P=x=M=E=p=m=w=f=0,_=T*(L=t[d=s<<2]),b=T*(S=t[d+1]),y=T*(O=t[d+2]),v=T*(C=t[d+3]),f+=j*L,p+=j*S,m+=j*O,w+=j*C,I=W,c=0;c<T;c++)I.r=L,I.g=S,I.b=O,I.a=C,I=I.next;for(u=e,c=1;c<=o;c++)d=u+s<<2,f+=(I.r=L=t[d])*(H=T-c),p+=(I.g=S=t[d+1])*H,m+=(I.b=O=t[d+2])*H,w+=(I.a=C=t[d+3])*H,E+=L,P+=S,x+=O,M+=C,I=I.next,c<R&&(u+=e);for(d=s,z=W,F=$,h=0;h<i;h++)t[3+(l=d<<2)]=C=w*N>>A,C>0?(C=255/C,t[l]=(f*N>>A)*C,t[l+1]=(p*N>>A)*C,t[l+2]=(m*N>>A)*C):t[l]=t[l+1]=t[l+2]=0,f-=_,p-=b,m-=y,w-=v,_-=z.r,b-=z.g,y-=z.b,v-=z.a,l=s+((l=h+T)<R?l:R)*e<<2,f+=E+=z.r=t[l],p+=P+=z.g=t[l+1],m+=x+=z.b=t[l+2],w+=M+=z.a=t[l+3],z=z.next,_+=L=F.r,b+=S=F.g,y+=O=F.b,v+=C=F.a,E-=L,P-=S,x-=O,M-=C,F=F.next,d+=e}}}},function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),i=(r(3),r(2)),o=r.n(i),s=r(1),h=r.n(s);
/*! Fast Average Color | Â© 2019 Denis Seleznev | MIT License | https://github.com/hcodes/fast-average-color/ */
function c(t,e,r){const n={};for(let a=0;a<e;a+=r){let e=t[a],r=t[a+1],i=t[a+2],o=t[a+3],s=Math.round(e/24)+","+Math.round(r/24)+","+Math.round(i/24);n[s]?n[s]=[n[s][0]+e*o,n[s][1]+r*o,n[s][2]+i*o,n[s][3]+o,n[s][4]+1]:n[s]=[e*o,r*o,i*o,o,1]}const a=Object.keys(n).map(function(t){return n[t]}).sort(function(t,e){const r=t[4],n=e[4];return r>n?-1:r===n?0:1}),[i,o,s,h,c]=a[0];return h?[Math.round(i/h),Math.round(o/h),Math.round(s/h),Math.round(h/c)]:[0,0,0,0]}function l(t,e,r){let n=0,a=0,i=0,o=0,s=0;for(let h=0;h<e;h+=r){const e=t[h+3];n+=t[h]*e,a+=t[h+1]*e,i+=t[h+2]*e,o+=e,s++}return o?[Math.round(n/o),Math.round(a/o),Math.round(i/o),Math.round(o/s)]:[0,0,0,0]}function u(t,e,r){let n=0,a=0,i=0,o=0,s=0;for(let h=0;h<e;h+=r){const e=t[h],r=t[h+1],c=t[h+2],l=t[h+3];n+=e*e*l,a+=r*r*l,i+=c*c*l,o+=l,s++}return o?[Math.round(Math.sqrt(n/o)),Math.round(Math.sqrt(a/o)),Math.round(Math.sqrt(i/o)),Math.round(o/s)]:[0,0,0,0]}const d="FastAverageColor: ";var g=class{getColorAsync(t,e){if(t.complete){const r=this.getColor(t,e);return r.error?Promise.reject(r.error):Promise.resolve(r)}return this._bindImageEvents(t,e)}getColor(t,e){e=e||{};const r=this._getDefaultColor(e),n=this._getOriginalSize(t),a=this._prepareSizeAndPosition(n,e);let i=r;if(!(a.srcWidth&&a.srcHeight&&a.destWidth&&a.destHeight))return this._outputError(e,`incorrect sizes for resource "${t.src}".`),this._prepareResult(r);if(!this._ctx&&(this._canvas=this._makeCanvas(),this._ctx=this._canvas.getContext&&this._canvas.getContext("2d"),!this._ctx))return this._outputError(e,"Canvas Context 2D is not supported in this browser."),this._prepareResult(r);this._canvas.width=a.destWidth,this._canvas.height=a.destHeight;try{this._ctx.clearRect(0,0,a.destWidth,a.destHeight),this._ctx.drawImage(t,a.srcLeft,a.srcTop,a.srcWidth,a.srcHeight,0,0,a.destWidth,a.destHeight);const r=this._ctx.getImageData(0,0,a.destWidth,a.destHeight).data;i=this.getColorFromArray4(r,e)}catch(r){this._outputError(e,`security error (CORS) for resource ${t.src}.\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image`,r)}return this._prepareResult(i)}getColorFromArray4(t,e){e=e||{};const r=t.length;if(r<4)return this._getDefaultColor(e);const n=r-r%4,a=4*(e.step||1);let i;switch(e.algorithm||"sqrt"){case"simple":i=l;break;case"sqrt":i=u;break;case"dominant":i=c;break;default:throw new Error(`${d}${e.algorithm} is unknown algorithm.`)}return i(t,n,a)}destroy(){delete this._canvas,delete this._ctx}_getDefaultColor(t){return this._getOption(t,"defaultColor",[255,255,255,255])}_getOption(t,e,r){return void 0===t[e]?r:t[e]}_prepareSizeAndPosition(t,e){let r,n=this._getOption(e,"left",0),a=this._getOption(e,"top",0),i=this._getOption(e,"width",t.width),o=this._getOption(e,"height",t.height),s=i,h=o;return"precision"===e.mode?{srcLeft:n,srcTop:a,srcWidth:i,srcHeight:o,destWidth:s,destHeight:h}:(i>o?(r=i/o,s=100,h=Math.round(s/r)):(r=o/i,h=100,s=Math.round(h/r)),(s>i||h>o||s<10||h<10)&&(s=i,h=o),{srcLeft:n,srcTop:a,srcWidth:i,srcHeight:o,destWidth:s,destHeight:h})}_bindImageEvents(t,e){return new Promise((r,n)=>{const a=()=>{s();const a=this.getColor(t,e);a.error?n(a.error):r(a)},i=()=>{s(),n(new Error(`${d}Error loading image ${t.src}.`))},o=()=>{s(),n(new Error(`${d}Image "${t.src}" loading aborted.`))},s=()=>{t.removeEventListener("load",a),t.removeEventListener("error",i),t.removeEventListener("abort",o)};t.addEventListener("load",a),t.addEventListener("error",i),t.addEventListener("abort",o)})}_prepareResult(t){const e=t.slice(0,3),r=[].concat(e,t[3]/255),n=this._isDark(t);return{value:t,rgb:"rgb("+e.join(",")+")",rgba:"rgba("+r.join(",")+")",hex:this._arrayToHex(e),hexa:this._arrayToHex(t),isDark:n,isLight:!n}}_getOriginalSize(t){return t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:{width:t.width,height:t.height}}_toHex(t){let e=t.toString(16);return 1===e.length?"0"+e:e}_arrayToHex(t){return"#"+t.map(this._toHex).join("")}_isDark(t){return(299*t[0]+587*t[1]+114*t[2])/1e3<128}_makeCanvas(){return"undefined"==typeof window?new OffscreenCanvas(1,1):document.createElement("canvas")}_outputError(t,e,r){t.silent||(console.error(`${d}${e}`),r&&console.error(r))}};const f=["jpg","jpeg","png","gif","webp"],p=new RegExp(/^.*\.(.{1,5})$/gim),m=(new RegExp(/(\.(jpg|png|gif|jpeg|webp|tiff))\??([^\/]*)?/gi),new g),w=async t=>{return{...await new Promise((e,r)=>{o()(t).size(async(t,r)=>{if(t)return e({err:t});e({width:r.width,height:r.height})})})}},_=t=>{return t.filter(t=>(t=>!!f.includes(t.toLowerCase()))(t.type))},b=async(t,e)=>{const r=[];return await t.forEach(async t=>{const{mtimeMs:n,atimeMs:a,ctimeMs:i}=await h.a.statSync(e+t),o=Math.floor(Math.random()*Date.now()),s=(t=>t.replace(p,"$1"))(t),c={fileName:t.replace(/\?/g,"%3F"),fullPath:(e+t).replace(/\?/g,"%3F"),url:"",dir:e.replace(/\?/g,"%3F"),size:"",mtime:n,atime:a,ctime:i,isUrl:!1,type:s,id:o};r.push(c)}),r},{ipcRenderer:y}=window.electron;y.on("asynchronous-message",async(t,e)=>{const{data:r,type:n}=e;switch(n){case"GET_PROPS":{const t={...await(async t=>{const e=await w(t),{width:r,height:n,err:a}=e;return{width:r,height:n,aspect:r/n,err:a,fullPath:t}})(r.fullPath),path:r.fullPath};y.send("asynchronous-message",(({width:t,height:e,aspect:r,fullPath:n})=>({type:"SEND_PROPS",data:{fullPath:n,width:t,height:e,aspect:r}}))(t));break}case"GET_RESIZED":{const{width:t,height:e,fullPath:n}=r,i={fullPath:n,base64:await(async({fullPath:t,width:e,height:r})=>{return await new Promise((n,i)=>{a()(t).resize(Math.round(e),Math.round(r),{fit:a.a.fit.inside,kernel:a.a.kernel.lanczos3,withoutEnlargement:!0}).png({compressionLevel:0}).toBuffer().then(t=>n("data:image/png;base64,"+t.toString("base64"))).catch(t=>i(t))})})({width:t,height:e,fullPath:n})};y.send("asynchronous-message",(({fullPath:t,base64:e})=>({type:"SEND_RESIZED",data:{fullPath:t,base64:e}}))(i));break}case"GET_BLURED":{const{width:t,height:e,fullPath:n}=r,i={fullPath:n,base64:await(async({fullPath:t,width:e,height:r})=>{return await new Promise((n,i)=>{a()(t).resize(Math.round(e),r,{fit:a.a.fit.fill,kernel:a.a.kernel.nearest,withoutEnlargement:!0}).blur(15).png({compressionLevel:0}).toBuffer().then(t=>n("data:image/jpeg;base64,"+t.toString("base64"))).catch(t=>i(t))})})({width:t,height:e,fullPath:n})};y.send("asynchronous-message",(({fullPath:t,base64:e})=>({type:"SEND_BLURED",data:{fullPath:t,base64:e}}))(i));break}case"GET_COLOR":{const{buffer:t,fullPath:e}=r,n={fullPath:e,color:await(async t=>{m.getColorFromArray4(t)})(t)};y.send("asynchronous-message",(({fullPath:t,color:e})=>({type:"SEND_COLOR",data:{fullPath:t,color:e}}))(n));break}case"GET_FILELIST":{const{dir:t}=r,e={fileList:await(async t=>{return await new Promise(e=>{h.a.readdir(t,async(r,n)=>{const a=await b(n,t),i=await _(a);e(i)})})})(t)};y.send("asynchronous-message",(({fileList:t})=>({type:"SEND_FILELIST",data:{fileList:t}}))(e));break}}})}]);