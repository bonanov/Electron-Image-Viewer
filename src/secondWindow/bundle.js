!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports=sharp},function(e,t){e.exports=path},function(e,t){e.exports=fs},function(e,t){e.exports=gm},function(e,t){e.exports=exif},function(e,t){!function(e,t){"use strict";if(!e.setImmediate){var n,a,r,i,s,o=1,c={},l=!1,u=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick(function(){d(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){d(e.data)},n=function(e){r.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(a=u.documentElement,n=function(e){var t=u.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):n=function(e){setTimeout(d,0,e)}:(i="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&d(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(i+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var r={callback:e,args:t};return c[o]=r,n(o),o++},f.clearImmediate=h}function h(e){delete c[e]}function d(e){if(l)setTimeout(d,0,e);else{var n=c[e];if(n){l=!0;try{!function(e){var n=e.callback,a=e.args;switch(a.length){case 0:n();break;case 1:n(a[0]);break;case 2:n(a[0],a[1]);break;case 3:n(a[0],a[1],a[2]);break;default:n.apply(t,a)}}(n)}finally{h(e),l=!1}}}}}("undefined"==typeof self?"undefined"==typeof global?this:global:self)},function(e,t,n){"use strict";n.r(t);const{ipcRenderer:a}=window.electron;var r=n(0),i=n.n(r),s=n(3),o=n.n(s),c=n(2),l=n.n(c),u=n(1),f=n.n(u),h=n(4);const d=["jpg","jpeg","png","gif","webp"],p=new RegExp(/^.*\.(.{1,5})$/gim),{ipcRenderer:g}=(new RegExp(/(\.(jpg|png|gif|jpeg|webp|tiff))\??([^\/]*)?/gi),n(5),window.electron),m=async e=>{return{...await new Promise((t,n)=>{o()(e).size(async(e,n)=>{if(e)return t({err:e});t({width:n.width,height:n.height})})})}},w=e=>{return e.filter(e=>(e=>!!d.includes(e.toLowerCase()))(e.type))},y=async(e,t)=>{const n=[];return await e.forEach(async e=>{const{size:a,mtimeMs:r,atimeMs:i,ctimeMs:s}=await l.a.statSync(f.a.join(t,e)),o=Math.floor(Math.random()*Date.now()),c=(e=>e.replace(p,"$1"))(e),u={fileName:e,fullPath:f.a.normalize(f.a.join(t,e)),url:"",dir:t,size:a,mtime:r,atime:i,ctime:s,isUrl:!1,type:c,id:o};n.push(u)}),n},{ipcRenderer:b}=window.electron;b.on("asynchronous-message",async(e,t)=>{const{data:n,type:a}=t;switch(a){case"GET_PROPS":{const e={...await(async e=>{const t=await m(e),{width:n,height:a,err:r}=t;return{width:n,height:a,aspect:n/a,err:r,fullPath:e}})(n.fullPath),path:n.fullPath};b.send("asynchronous-message",(({width:e,height:t,aspect:n,fullPath:a})=>({type:"SEND_PROPS",data:{fullPath:a,width:e,height:t,aspect:n}}))(e));break}case"GET_RESIZED":{const{width:e,height:t,fullPath:a}=n,r={fullPath:a,base64:await(async({fullPath:e,width:t,height:n})=>{return await new Promise((a,r)=>{i()(e).resize(Math.round(t),Math.round(n),{fit:i.a.fit.inside,kernel:i.a.kernel.lanczos3,withoutEnlargement:!0}).png({compressionLevel:0}).toBuffer().then(e=>a([new Uint8Array(e)])).catch(e=>r(e))})})({width:e,height:t,fullPath:a})};b.send("asynchronous-message",(({fullPath:e,base64:t})=>({type:"SEND_RESIZED",data:{fullPath:e,base64:t}}))(r));break}case"GET_BLURED":{const{width:e,height:t,fullPath:a}=n,r={fullPath:a,base64:await(async({fullPath:e,width:t,height:n})=>{return await new Promise((a,r)=>{i()(e).resize(Math.round(t),n,{fit:i.a.fit.fill,kernel:i.a.kernel.nearest,withoutEnlargement:!0}).blur(15).png({compressionLevel:0}).toBuffer().then(e=>a("data:image/jpeg;base64,"+e.toString("base64"))).catch(e=>r(e))})})({width:e,height:t,fullPath:a})};b.send("asynchronous-message",(({fullPath:e,base64:t})=>({type:"SEND_BLURED",data:{fullPath:e,base64:t}}))(r));break}case"GET_FILELIST":{const{dir:e}=n,t={fileList:await(async e=>{return await new Promise(t=>{l.a.readdir(e,async(n,a)=>{const r=await y(a,e),i=await w(r);t(i)})})})(e)};b.send("asynchronous-message",(({fileList:e})=>({type:"SEND_FILELIST",data:{fileList:e}}))(t));break}case"GET_EXIF":{const{fullPath:e}=n,t=(({exifData:e,fullPath:t})=>({type:"SEND_EXIF",data:{exifData:e,fullPath:t}}))({exifData:await(async e=>{return await new Promise(t=>{new h.ExifImage({image:e},(e,n)=>{if(e)return t({err:e});t(n)})})})(e),fullPath:e});b.send("asynchronous-message",t);break}}})}]);